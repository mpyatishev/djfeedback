require(["./common"],function(){require(["feedbacks/dj-feedback-app"])}),define("dj-feedback",function(){}),define("feedbacks/dj-feedback-app",["jquery","jqueryCookie","jqueryValidate","toggler"],function(e,n,o,t){var a=function(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)},r=function(n){n=e(n),n.addClass("_state_ajax-waiting"),n.find("[type='submit']").attr("disabled","disabled")},i=function(n){n=e(n),n.removeClass("_state_ajax-waiting"),n.find("[type='submit']").removeAttr("disabled")},s=function(n){e(n).find("[autocomplete='off']").each(function(){var n=e(this);n.val(n.prop("defaultValue"))})},c=function(){var n=new t({name:"dj-feedback",closeOnBlur:!0}),o=e(".b-dj-feedback__form");o.validate({errorClass:"help-block",errorElement:"span",highlight:function(n){e(n).closest(".form-group").addClass("has-error")},unhighlight:function(n){e(n).closest(".form-group").removeClass("has-error")},submitHandler:function(o){e.ajax({url:o.action,type:"POST",data:new FormData(o),processData:!1,contentType:!1,beforeSend:function(n,t){a(t.type)||n.setRequestHeader("X-CSRFToken",e.cookie("csrftoken")),r(o)},success:function(e){console.log(e),i(o),s(o),n.close()},error:function(e,n,t){console.log(t),i(o)}})}})};return new c});